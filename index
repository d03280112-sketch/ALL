<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ä¸»æ§å°ï½œéš¨æ©ŸæŠ½ 14 çµ„é¡Œç›®</title>
  <style>
    body{margin:0;font-family:system-ui,-apple-system,"Microsoft JhengHei",sans-serif;background:#0b0b0b;color:#fff;}
    .wrap{max-width:980px;margin:0 auto;padding:24px;}
    h1{margin:0 0 10px;font-size:28px;}
    .hint{opacity:.8;line-height:1.6}
    .card{background:#141414;border:1px solid #2a2a2a;border-radius:16px;padding:18px;margin:14px 0;}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between}
    button{border:0;border-radius:14px;padding:12px 16px;font-weight:900;cursor:pointer;background:#00e5ff;color:#001015}
    button.secondary{background:#ffd400;color:#1a1200}
    button.ghost{background:#222;color:#fff;border:1px solid #333}
    button:disabled{opacity:.45;cursor:not-allowed}
    .big{font-size:56px;font-weight:1000;letter-spacing:1px;color:#ffd400;text-shadow:0 0 12px rgba(255,212,0,.55)}
    .now{font-size:18px;font-weight:900}
    .link{color:#00e5ff;text-decoration:none}
    .link:hover{text-decoration:underline}
    .list{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:10px;margin-top:12px}
    .pill{background:#0f0f0f;border:1px solid #2a2a2a;border-radius:14px;padding:10px 12px;display:flex;justify-content:space-between;gap:10px;align-items:center}
    .pill.used{opacity:.35}
    .tag{font-size:12px;padding:4px 8px;border-radius:999px;background:#222;border:1px solid #333;white-space:nowrap}
  </style>
</head>
<body>
<div class="wrap">
  <h1>ğŸ² ä¸»æ§å°ï¼šéš¨æ©ŸæŠ½ 14 çµ„é¡Œç›®ï¼ˆä¸é‡è¤‡ï¼‰</h1>
  <div class="hint">
    æŒ‰ã€Œéš¨æ©ŸæŠ½ä¸€çµ„ã€æœƒå¾æœªæŠ½éçš„çµ„åˆ¥æŠ½å‡º 1 çµ„ä¸¦ç›´æ¥é–‹å•Ÿè©²çµ„çš„ GitHub Pagesã€‚
    æŠ½éçš„æœƒè‡ªå‹•æ‰£æ‰ï¼Œç›´åˆ°æŠ½å®Œã€‚<br/>
    å°æç¤ºï¼šæŠ½å®Œ 14 çµ„å¾Œå¯æŒ‰ã€Œé‡ç½®ã€å…¨éƒ¨å›ä¾†ã€‚
  </div>

  <div class="card">
    <div class="row">
      <div>
        <div style="opacity:.7">å‰©é¤˜çµ„æ•¸</div>
        <div class="big" id="remain">14</div>
      </div>
      <div style="min-width:340px">
        <div style="opacity:.7">æœ¬æ¬¡æŠ½åˆ°</div>
        <div class="now" id="pickedName">ï¼ˆå°šæœªæŠ½ï¼‰</div>
        <div style="margin-top:6px">
          <a class="link" id="pickedLink" href="#" target="_self" style="display:none">é–‹å•Ÿæ­¤çµ„</a>
        </div>
      </div>
    </div>

    <div class="row" style="justify-content:flex-start;margin-top:14px">
      <button id="btnPick">éš¨æ©ŸæŠ½ä¸€çµ„</button>
      <button class="secondary" id="btnReset">é‡ç½®ï¼ˆå…¨éƒ¨å›ä¾†ï¼‰</button>
      <button class="ghost" id="btnOpenLast">é–‹å•Ÿä¸Šä¸€æ¬¡æŠ½åˆ°çš„çµ„</button>
    </div>
  </div>

  <div class="card">
    <div style="font-weight:900;margin-bottom:8px">14 çµ„æ¸…å–®ï¼ˆå¯é»é€£çµï¼‰</div>
    <div class="hint" style="margin-bottom:10px">
      æŠ½éçš„æœƒè®Šæ·¡ä¸¦æ¨™ç¤ºã€Œå·²æŠ½ã€ã€‚ä½ ä¹Ÿå¯ä»¥æ‰‹å‹•é»ã€Œé–‹å•Ÿã€æ¸¬è©¦å„çµ„æ˜¯å¦æ­£å¸¸ã€‚
    </div>
    <div class="list" id="list"></div>
  </div>
</div>

<script>
  // âœ… ä½ çš„ 14 çµ„ç¶²å€ï¼ˆå·²å¡«å¥½ï¼‰
  const GROUPS = [
    { name: "æ–‡å…·",   url: "https://d03280112-sketch.github.io/pen/" },
    { name: "æ°´æœ",   url: "https://d03280112-sketch.github.io/-fruit/" },
    { name: "ä¸‰åœ‹",   url: "https://d03280112-sketch.github.io/Three-Kingdoms/" },
    { name: "å°ç£",   url: "https://d03280112-sketch.github.io/taiwan/" },
    { name: "å“ç‰Œ",   url: "https://d03280112-sketch.github.io/brand/" },
    { name: "æˆèª",   url: "https://d03280112-sketch.github.io/idiom/" },
    { name: "æ–™ç†A",  url: "https://d03280112-sketch.github.io/cookA/" },
    { name: "æ–™ç†B",  url: "https://d03280112-sketch.github.io/cookB/" },
    { name: "é‹å‹•",   url: "https://d03280112-sketch.github.io/sports/" },
    { name: "é›¶é£Ÿ",   url: "https://d03280112-sketch.github.io/snack/" },
    { name: "é›»å™¨",   url: "https://d03280112-sketch.github.io/3C/" },
    { name: "è”¬èœ",   url: "https://d03280112-sketch.github.io/vegetable/" },
    { name: "è¾¦å…¬å®¤", url: "https://d03280112-sketch.github.io/offiice/" },
    { name: "è·æ¥­",   url: "https://d03280112-sketch.github.io/Profession/" }
  ];

  const KEY_USED = "quiz_used_groups_v1";
  const KEY_LAST = "quiz_last_group_v1";

  const elRemain = document.getElementById("remain");
  const elPickedName = document.getElementById("pickedName");
  const elPickedLink = document.getElementById("pickedLink");
  const elList = document.getElementById("list");
  const btnPick = document.getElementById("btnPick");
  const btnReset = document.getElementById("btnReset");
  const btnOpenLast = document.getElementById("btnOpenLast");

  function loadUsed(){
    try {
      const v = JSON.parse(localStorage.getItem(KEY_USED) || "[]");
      return Array.isArray(v) ? v : [];
    } catch { return []; }
  }
  function saveUsed(arr){ localStorage.setItem(KEY_USED, JSON.stringify(arr)); }
  function saveLast(idx){ localStorage.setItem(KEY_LAST, String(idx)); }
  function loadLast(){
    const v = localStorage.getItem(KEY_LAST);
    const n = Number(v);
    return Number.isFinite(n) ? n : null;
  }

  function render(){
    const used = new Set(loadUsed());
    const remain = GROUPS.length - used.size;
    elRemain.textContent = String(remain);
    btnPick.disabled = (remain <= 0);

    elList.innerHTML = "";
    GROUPS.forEach((g, i) => {
      const div = document.createElement("div");
      div.className = "pill" + (used.has(i) ? " used" : "");

      const left = document.createElement("div");
      left.style.minWidth = "0";
      left.innerHTML = `
        <div style="font-weight:900;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">${g.name}</div>
        <div style="opacity:.75;font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">${g.url}</div>
      `;

      const right = document.createElement("div");
      right.style.display = "flex";
      right.style.gap = "8px";
      right.style.alignItems = "center";

      const tag = document.createElement("div");
      tag.className = "tag";
      tag.textContent = used.has(i) ? "å·²æŠ½" : "æœªæŠ½";

      const a = document.createElement("a");
      a.className = "link";
      a.href = g.url;
      a.target = "_self";
      a.textContent = "é–‹å•Ÿ";
      a.style.fontSize = "12px";

      right.appendChild(tag);
      right.appendChild(a);
      div.appendChild(left);
      div.appendChild(right);
      elList.appendChild(div);
    });
  }

  function pickRandom(){
    const usedArr = loadUsed();
    const used = new Set(usedArr);

    const candidates = [];
    for (let i=0;i<GROUPS.length;i++){
      if (!used.has(i)) candidates.push(i);
    }
    if (candidates.length === 0) return;

    const idx = candidates[Math.floor(Math.random() * candidates.length)];
    usedArr.push(idx);
    saveUsed(usedArr);
    saveLast(idx);

    const g = GROUPS[idx];
    elPickedName.textContent = `ã€${g.name}ã€‘`;
    elPickedLink.href = g.url;
    elPickedLink.style.display = "inline-block";

    render();

    // ç›´æ¥è·³åˆ°è©²çµ„ï¼ˆåŒåˆ†é ï¼‰
    window.location.href = g.url;
  }

  btnPick.addEventListener("click", pickRandom);

  btnReset.addEventListener("click", () => {
    localStorage.removeItem(KEY_USED);
    localStorage.removeItem(KEY_LAST);
    elPickedName.textContent = "ï¼ˆå°šæœªæŠ½ï¼‰";
    elPickedLink.style.display = "none";
    render();
  });

  btnOpenLast.addEventListener("click", () => {
    const idx = loadLast();
    if (idx === null || idx < 0 || idx >= GROUPS.length) return;
    window.location.href = GROUPS[idx].url;
  });

  render();
</script>
</body>
</html>
